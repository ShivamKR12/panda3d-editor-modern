<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pandaEditor.ui.mainFrame &#8212; Pand3D Editor Modern 0.1.0-dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=27fed22d" />
    <script src="../../../_static/documentation_options.js?v=ee2d09ae"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for pandaEditor.ui.mainFrame</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">wx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wx.aui</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">wx.propgrid</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wxpg</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pubsub</span><span class="w"> </span><span class="kn">import</span> <span class="n">pub</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">panda3d.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pm</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">p3d</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">direct.showbase.PythonUtil</span><span class="w"> </span><span class="kn">import</span> <span class="n">getBase</span> <span class="k">as</span> <span class="n">get_base</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxExtra</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span> <span class="k">as</span> <span class="n">wxUtils</span><span class="p">,</span> <span class="n">ActionItem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxExtra.logpanel</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogPanel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wxExtra</span><span class="w"> </span><span class="kn">import</span> <span class="n">AuiManagerConfig</span><span class="p">,</span> <span class="n">CustomAuiToolBar</span><span class="p">,</span> <span class="n">CustomMenu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor</span><span class="w"> </span><span class="kn">import</span> <span class="n">commands</span> <span class="k">as</span> <span class="n">cmds</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">MODEL_EXTENSIONS</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.viewport</span><span class="w"> </span><span class="kn">import</span> <span class="n">Viewport</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.resourcesPanel</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResourcesPanel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.sceneGraphPanel</span><span class="w"> </span><span class="kn">import</span> <span class="n">SceneGraphPanel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.propertiesPanel</span><span class="w"> </span><span class="kn">import</span> <span class="n">PropertiesPanel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.preferenceseditor</span><span class="w"> </span><span class="kn">import</span> <span class="n">PreferencesEditor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandaEditor.ui.createdialog</span><span class="w"> </span><span class="kn">import</span> <span class="n">CreateDialog</span>


<span class="n">FRAME_TITLE</span> <span class="o">=</span> <span class="s1">&#39;Panda Editor 0.1&#39;</span>
<span class="n">TBAR_ICON_SIZE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">WILDCARD_SCENE</span> <span class="o">=</span> <span class="s1">&#39;.xml|*.xml&#39;</span>
<span class="n">WILDCARD_P3D</span> <span class="o">=</span> <span class="s1">&#39;.p3d|*.p3d&#39;</span>

<span class="n">ID_FILE_NEW</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_FILE_OPEN</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_FILE_SAVE</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_FILE_SAVE_AS</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_FILE_IMPORT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_FILE_PROJ</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_PROJ_NEW</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_PROJ_SET</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_PROJ_BUILD</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_EDIT_UNDO</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_REDO</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_GROUP</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_UNGROUP</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_PARENT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_UNPARENT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_DUPLICATE</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_WRITE_BAM_FILE</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_EDIT_EXPORT_OBJ</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_MODIFY_PHYSICS</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_XFORM_SEL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_XFORM_POS</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_XFORM_ROT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_XFORM_SCL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_XFORM_WORLD</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_VIEW_GRID</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_VIEW_TOP</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_VIEW_BOTTOM</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_VIEW_FRONT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_VIEW_BACK</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_VIEW_RIGHT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_VIEW_LEFT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_CREATE_PREFAB</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_LAYOUT_GAME</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_LAYOUT_EDITOR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 
<span class="n">ID_LAYOUT_BOTH</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span> 

<span class="n">ID_WIND_PANEL</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_FILE_TOOLBAR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_EDIT_TOOLBAR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_MODIFY_TOOLBAR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_XFORM_TOOLBAR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_LAYOUT_TOOLBAR</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_VIEWPORT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_SCENE_GRAPH</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_LIGHT_LINKER</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_PROPERTIES</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_RESOURCES</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_LOG</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_WIND_PREFERENCES</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>

<span class="n">ID_PLAY</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
<span class="n">ID_PAUSE</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>


<div class="viewcode-block" id="MainFrame">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MainFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Panda Editor user interface.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preMaxPos</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preMaxSize</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Bind frame events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnClose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_KEY_UP</span><span class="p">,</span> <span class="n">p3d</span><span class="o">.</span><span class="n">wxPanda</span><span class="o">.</span><span class="n">OnKeyUp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_KEY_DOWN</span><span class="p">,</span> <span class="n">p3d</span><span class="o">.</span><span class="n">wxPanda</span><span class="o">.</span><span class="n">OnKeyDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnSize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MOVE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMove</span><span class="p">)</span>

        <span class="c1"># Bind publisher events</span>
        <span class="n">pub</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OnUpdate</span><span class="p">,</span> <span class="s1">&#39;Update&#39;</span><span class="p">)</span>

        <span class="c1"># Build application preferences</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Config</span><span class="p">(</span><span class="s1">&#39;pandaEditor&#39;</span><span class="p">)</span>

        <span class="c1"># Build toolbars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildFileActions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildEditActions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildModifyActions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildXformActions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildLayoutActions</span><span class="p">()</span>

        <span class="c1"># Build viewport. Don&#39;t initialise just yet as ShowBase has not yet</span>
        <span class="c1"># been created.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlViewport</span> <span class="o">=</span> <span class="n">Viewport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Build editor panels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlSceneGraph</span> <span class="o">=</span> <span class="n">SceneGraphPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlProps</span> <span class="o">=</span> <span class="n">PropertiesPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlRsrcs</span> <span class="o">=</span> <span class="n">ResourcesPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlLog</span> <span class="o">=</span> <span class="n">LogPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Build aui manager to hold all the widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildAuiManager</span><span class="p">()</span>

        <span class="c1"># Build menus and menu bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MenuBar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildViewMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildCreateMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildWindowMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BuildMenuBar</span><span class="p">()</span>

        <span class="c1"># Populate the panels menu bar with items representing each floating</span>
        <span class="c1"># panel.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RebuildPanelMenu</span><span class="p">()</span>

        <span class="c1"># Update the view menu based on the perspective saved in preferences</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateWindowMenu</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_GetSavePath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Get default paths from current project directory, or the scene&#39;s</span>
        <span class="c1"># current location on disk</span>
        <span class="n">defaultDir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">defaultFile</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">file_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">defaultDir</span><span class="p">,</span> <span class="n">defaultFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">defaultDir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">GetScenesDirectory</span><span class="p">()</span>

        <span class="c1"># Open file browser</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">file_save_dialog</span><span class="p">(</span><span class="s1">&#39;Save Scene As&#39;</span><span class="p">,</span> <span class="n">WILDCARD_SCENE</span><span class="p">,</span> <span class="n">defaultDir</span><span class="o">=</span><span class="n">defaultDir</span><span class="p">,</span> <span class="n">defaultFile</span><span class="o">=</span><span class="n">defaultFile</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filePath</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">):</span>

            <span class="c1"># Warn user if the chosen file path already exists</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;The file &quot;&#39;</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;&quot; already exists.</span><span class="se">\n</span><span class="s1">Do you want to replace it?&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">YesNoDialog</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s1">&#39;Replace File?&#39;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ICON_WARNING</span><span class="p">)</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_NO</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">filePath</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_CheckForSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If there is already a file loaded and it is dirty, query the user to</span>
<span class="sd">        save the file. Return False for cancel, True otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">dirty</span><span class="p">:</span>

            <span class="c1"># Show dialog, record result</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;The document &quot;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="s1">&#39;&quot; was modified after last save.</span><span class="se">\n</span><span class="s1">Save changes before continuing?&#39;</span><span class="p">])</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">YesNoCancelDialog</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s1">&#39;Save Changes?&#39;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ICON_WARNING</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_YES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OnFileSave</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">result</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_CANCEL</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Document not dirty, return True</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="MainFrame.OnClose">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnClose">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save frame and aui preferences, hide the window and quit.&quot;&quot;&quot;</span>
        <span class="c1"># Check if ok to continue, stop the closing process if the user</span>
        <span class="c1"># cancelled</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_CheckForSave</span><span class="p">():</span>
            <span class="n">evt</span><span class="o">.</span><span class="n">Veto</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># Save prefs, hide window and quit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auiCfg</span><span class="o">.</span><span class="n">Save</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preMaxPos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auiCfg</span><span class="o">.</span><span class="n">SavePosition</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">preMaxPos</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preMaxSize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auiCfg</span><span class="o">.</span><span class="n">SaveSize</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">preMaxSize</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s1">&#39;projDirPath&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1">#self.base.Quit()</span>

        <span class="c1">#self.onDestroy(event)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">base</span>
        <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="n">base</span><span class="o">.</span><span class="n">userExit</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileNew">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileNew">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileNew</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show project settings panel and create new scene.&quot;&quot;&quot;</span>
        <span class="c1"># Check if ok to continue, return if the user cancelled</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_CheckForSave</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="c1"># Create new document</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">CreateScene</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">on_refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileOpen">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileOpen">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileOpen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">filePath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new document and load the scene.&quot;&quot;&quot;</span>
        <span class="c1"># Check if ok to continue, return if the user cancelled</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_CheckForSave</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="c1"># Create new document from file path and load it</span>
        <span class="k">if</span> <span class="n">filePath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="c1"># Get the start directory. This will be the current working</span>
            <span class="c1"># directory if the project is not set.</span>
            <span class="n">scnsDirPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">GetScenesDirectory</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scnsDirPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">scnsDirPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

            <span class="n">filePath</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">file_open_dialog</span><span class="p">(</span><span class="s1">&#39;Open Scene&#39;</span><span class="p">,</span> <span class="n">WILDCARD_SCENE</span><span class="p">,</span>
                                                <span class="n">defaultDir</span><span class="o">=</span><span class="n">scnsDirPath</span><span class="p">)</span>

        <span class="c1"># Create new document</span>
        <span class="k">if</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">CreateScene</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">load</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileSave">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileSave">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileSave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">saveAs</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the document.&quot;&quot;&quot;</span>
        <span class="c1"># Set a file path for the document if one does not exist, or for save</span>
        <span class="c1"># as</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">file_path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">saveAs</span><span class="p">:</span>

            <span class="c1"># Query a new save path</span>
            <span class="n">filePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_GetSavePath</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">filePath</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">filePath</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="c1"># Save the file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileSaveAs">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileSaveAs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileSaveAs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call save using the saveAs flag in order to bring up a new dialog box</span>
<span class="sd">        so the user may set an alternate save path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnFileSave</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnFileImport">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileImport">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileImport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Import assets to project.&quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;*</span><span class="si">{</span><span class="n">extn</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">extn</span> <span class="ow">in</span> <span class="n">MODEL_EXTENSIONS</span><span class="p">])</span>
        <span class="n">wild_card</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Model (</span><span class="si">{</span><span class="n">formats</span><span class="si">}</span><span class="s1">)|</span><span class="si">{</span><span class="n">formats</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">file_paths</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">file_open_dialog</span><span class="p">(</span>
            <span class="s1">&#39;Import Models&#39;</span><span class="p">,</span>
            <span class="n">wild_card</span><span class="p">,</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">FD_MULTIPLE</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">file_paths</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">ImportAsset</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnFileNewProject">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileNewProject">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileNewProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build project directory and set project.&quot;&quot;&quot;</span>
        <span class="n">dirPath</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">director_dialog</span><span class="p">(</span><span class="s1">&#39;Set New Project Directory&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dirPath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">dirPath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetProjectPath</span><span class="p">(</span><span class="n">dirPath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">on_refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileSetProject">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileSetProject">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileSetProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the active project directory path and rebuild the resources panel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dirPath</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">director_dialog</span><span class="p">(</span><span class="s1">&#39;Set Project Directory&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dirPath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetProjectPath</span><span class="p">(</span><span class="n">dirPath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">on_refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnFileBuildProject">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnFileBuildProject">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnFileBuildProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build the current project to a p3d file.&quot;&quot;&quot;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">file_save_dialog</span><span class="p">(</span><span class="s1">&#39;Build Project&#39;</span><span class="p">,</span> <span class="n">WILDCARD_P3D</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">filePath</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">):</span>

            <span class="c1"># Warn user if the chosen file path already exists</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;The file &quot;&#39;</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;&quot; already exists.</span><span class="se">\n</span><span class="s1">Do you want to replace it?&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">wxUtils</span><span class="o">.</span><span class="n">YesNoDialog</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s1">&#39;Replace File?&#39;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ICON_WARNING</span><span class="p">)</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_NO</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">Build</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnEngagePhysics">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnEngagePhysics">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnEngagePhysics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">node_manager</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">physics_world</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">physics_task</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">taskMgr</span><span class="o">.</span><span class="n">getAllTasks</span><span class="p">():</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">enable_physics</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">disable_physics</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnViewGrid">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnViewGrid">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnViewGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show or hide the grid based on the checked value of the menu item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">IsChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnViewCamera">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnViewCamera">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnViewCamera</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">yaw_pitch</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Orbit camera top or bottom by manipulating delta values</span>
<span class="sd">        See p3d.camera.Orbit for more</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">Vec2</span><span class="p">(</span>
            <span class="o">-</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">edCamera</span><span class="o">.</span><span class="n">getH</span><span class="p">()</span> <span class="o">+</span> <span class="n">yaw_pitch</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="o">-</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">edCamera</span><span class="o">.</span><span class="n">getP</span><span class="p">()</span> <span class="o">+</span> <span class="n">yaw_pitch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">edCamera</span><span class="o">.</span><span class="n">Orbit</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.on_create">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.on_create">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">type_</span><span class="p">):</span>
        <span class="n">comp_cls</span> <span class="o">=</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">node_manager</span><span class="o">.</span><span class="n">wrappers</span><span class="p">[</span><span class="n">type_</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">comp_cls</span><span class="o">.</span><span class="n">get_default_values</span><span class="p">()</span>

        <span class="c1"># TODO: Rename from get_foo ;)</span>
        <span class="c1"># Also assert that required args are serviced by either the dialog or</span>
        <span class="c1"># default_values.</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="n">comp_cls</span><span class="o">.</span><span class="n">get_foo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">foo</span><span class="p">:</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">CreateDialog</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Create </span><span class="si">{</span><span class="n">comp_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
                <span class="p">{</span>
                    <span class="n">key</span><span class="p">:</span> <span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">foo</span>
                <span class="p">},</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">GetApp</span><span class="p">()</span><span class="o">.</span><span class="n">GetTopWindow</span><span class="p">(),</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Create&#39;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">CenterOnParent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">values</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">GetValues</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnCreateActor">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnCreateActor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnCreateActor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn the selection into actors. This is still a massive hack - we need</span>
<span class="sd">        a more concise way of storing this information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">wrpr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">wrprs</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="n">wrpr</span><span class="o">.</span><span class="n">find_property</span><span class="p">(</span><span class="s1">&#39;modelPath&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">wrprCls</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">node_manager</span><span class="o">.</span><span class="n">nodeWrappers</span><span class="p">[</span><span class="s1">&#39;Actor&#39;</span><span class="p">]</span>
            <span class="n">aWrpr</span> <span class="o">=</span> <span class="n">wrprCls</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">modelPath</span><span class="o">=</span><span class="n">attr</span><span class="o">.</span><span class="n">Get</span><span class="p">())</span>
            <span class="n">aWrpr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">setTransform</span><span class="p">(</span><span class="n">wrpr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">getTransform</span><span class="p">())</span>
            <span class="n">aWrpr</span><span class="o">.</span><span class="n">set_default_values</span><span class="p">()</span>
            <span class="n">aWrpr</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">wrpr</span><span class="o">.</span><span class="n">default_parent</span>
            <span class="n">cmds</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">wrpr</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">aWrpr</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.on_create_prefab">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.on_create_prefab">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_create_prefab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new prefab for the selected object in the prefab directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">np</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">node_paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">np_name</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
        <span class="n">dir_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">prefabs_directory</span>
        <span class="n">asset_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">get_unique_asset_name</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">np_name</span><span class="si">}</span><span class="s1">.xml&#39;</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">)</span>
        <span class="n">asset_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">asset_name</span><span class="p">)</span>
        <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">scene_parser</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">np</span><span class="p">,</span> <span class="n">asset_path</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnCreateCgShader">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnCreateCgShader">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnCreateCgShader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">CreateCgShader</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnCreateGlslShader">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnCreateGlslShader">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnCreateGlslShader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">CreateGlslShader</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnShowHidePane">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnShowHidePane">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnShowHidePane</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show or hide the pane based on the menu item that was (un)checked.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="p">[</span><span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">GetPane</span><span class="p">(</span><span class="n">pane</span><span class="p">)</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">IsChecked</span><span class="p">())</span>

        <span class="c1"># Make sure to call or else we won&#39;t see any changes.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">on_refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnXformSetActiveGizmo">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnXformSetActiveGizmo">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnXformSetActiveGizmo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_XFORM_WORLD</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">SetGizmoLocal</span><span class="p">(</span><span class="ow">not</span> <span class="n">evt</span><span class="o">.</span><span class="n">IsChecked</span><span class="p">())</span>
            <span class="k">return</span>

        <span class="n">arg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_XFORM_POS</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;pos&#39;</span>
        <span class="k">elif</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_XFORM_ROT</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;rot&#39;</span>
        <span class="k">elif</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_XFORM_SCL</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;scl&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">SetActiveGizmo</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnLayout">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnLayout">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_LAYOUT_GAME</span><span class="p">:</span>
            <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">LayoutGameView</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_LAYOUT_EDITOR</span><span class="p">:</span>
            <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">LayoutEditorView</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_LAYOUT_BOTH</span><span class="p">:</span>
            <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">LayoutBothView</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateWindowMenu">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateWindowMenu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateWindowMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the checks in the window menu to match the visibility of the</span>
<span class="sd">        panes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">UpdateWindowMenu</span><span class="p">():</span>

            <span class="c1"># Check those menus representing panels which are still shown</span>
            <span class="c1"># after the event</span>
            <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="p">:</span>
                <span class="n">pane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">FindItemById</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">GetPane</span><span class="p">(</span><span class="n">pane</span><span class="p">)</span><span class="o">.</span><span class="n">IsShown</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Uncheck all menus</span>
        <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">FindItemById</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Call after or IsShown() won&#39;t return a useful value</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="n">UpdateWindowMenu</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdate">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdate">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comps</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the appearance and states of buttons on the form based on the</span>
<span class="sd">        state of the loaded document.</span>

<span class="sd">        NOTE: Don&#39;t use freeze / thaw as this will cause the 3D viewport to</span>
<span class="sd">        flicker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateFile</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateEdit</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateModify</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_update_create</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateView</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateProject</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateXform</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span>

        <span class="c1"># Set the frame&#39;s title to include the document&#39;s file path, include</span>
        <span class="c1"># dirty &#39;star&#39;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">FRAME_TITLE</span><span class="p">,</span> <span class="s1">&#39; - &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">title</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">dirty</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">+=</span> <span class="s1">&#39; *&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">plugin_manager</span><span class="o">.</span><span class="n">on_update</span><span class="p">(</span><span class="n">comps</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateFile">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateFile">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the file menu. Disable all menu and toolbar items then turn</span>
<span class="sd">        those back on depending on the document&#39;s state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">EnableAllTools</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">EnableAllTools</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_NEW</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_OPEN</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_SAVE_AS</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_PROJ</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_FILE_NEW</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_FILE_OPEN</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_FILE_SAVE_AS</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">dirty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_SAVE</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_FILE_SAVE</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_FILE_IMPORT</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateEdit">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateEdit">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the edit menu. Disable undo or redo queus if they are empty</span>
<span class="sd">        and make sure to refresh the toolbar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">action_manager</span><span class="o">.</span><span class="n">undos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_UNDO</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_EDIT_UNDO</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">action_manager</span><span class="o">.</span><span class="n">redos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_REDO</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_EDIT_REDO</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

        <span class="n">comps_selected</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">comps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_GROUP</span><span class="p">,</span> <span class="n">comps_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_UNGROUP</span><span class="p">,</span> <span class="n">comps_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_DUPLICATE</span><span class="p">,</span> <span class="n">comps_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_WRITE_BAM_FILE</span><span class="p">,</span> <span class="n">comps_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_EDIT_EXPORT_OBJ</span><span class="p">,</span> <span class="n">comps_selected</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateModify">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateModify">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateModify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_MODIFY_PHYSICS</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">physics_world</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">EnableTool</span><span class="p">(</span><span class="n">ID_MODIFY_PHYSICS</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">physics_task</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">taskMgr</span><span class="o">.</span><span class="n">getAllTasks</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_MODIFY_PHYSICS</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_MODIFY_PHYSICS</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateView">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateView">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the view menu. Ensure the grid menu item&#39;s checked state</span>
<span class="sd">        matches the visibility of the grid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="n">ID_VIEW_GRID</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">isHidden</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="n">ID_VIEW_GRID</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateProject">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateProject">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="o">.</span><span class="n">EnableAllTools</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_PROJ_NEW</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_PROJ_SET</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="o">.</span><span class="n">EnableAllTools</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.on_update_create">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.on_update_create">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_update_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">ID_CREATE_PREFAB</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">comps</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnUpdateXform">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnUpdateXform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnUpdateXform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="n">gizmo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">gizmoMgr</span><span class="o">.</span><span class="n">GetActiveGizmo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">gizmo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_XFORM_SEL</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">gizmo</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pos&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_XFORM_POS</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">gizmo</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;rot&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_XFORM_ROT</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">gizmo</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;scl&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_XFORM_SCL</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">gizmoMgr</span><span class="o">.</span><span class="n">GetGizmoLocal</span><span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_XFORM_WORLD</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnShowPreferences">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnShowPreferences">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnShowPreferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span> <span class="o">=</span> <span class="n">PreferencesEditor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefs</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="MainFrame.OnMove">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnMove">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnMove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Keep the window&#39;s position on hand before it gets maximized as this is</span>
<span class="sd">        the number we need to save to preferences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsMaximized</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preMaxPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.OnSize">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.OnSize">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">OnSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Keep the window&#39;s size on hand before it gets maximized as this is the</span>
<span class="sd">        number we need to save to preferences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsMaximized</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preMaxSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainFrame.SetProjectPath">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.SetProjectPath">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">SetProjectPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirPath</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the project path and rebuild the resources panel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">dirPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pnlRsrcs</span><span class="o">.</span><span class="n">Build</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">path</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildFileActions">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildFileActions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildFileActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tools, set long help strings and bind toolbar events.&quot;&quot;&quot;</span>
        <span class="n">commonActns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;New&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;document.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileNew</span><span class="p">,</span> <span class="n">ID_FILE_NEW</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;folder-horizontal-open.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileOpen</span><span class="p">,</span> <span class="n">ID_FILE_OPEN</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Save&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;disk-black.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileSave</span><span class="p">,</span> <span class="n">ID_FILE_SAVE</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Save As&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;disk-black-pencil.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileSaveAs</span><span class="p">,</span> <span class="n">ID_FILE_SAVE_AS</span><span class="p">),</span>
        <span class="p">]</span>
        
        <span class="c1"># Create file menu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">commonActns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Import...&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileImport</span><span class="p">,</span> <span class="n">ID_FILE_IMPORT</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="c1"># Create project actions as a submenu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="n">actns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;New...&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileNewProject</span><span class="p">,</span> <span class="n">ID_PROJ_NEW</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Set...&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileSetProject</span><span class="p">,</span> <span class="n">ID_PROJ_SET</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Build...&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnFileBuildProject</span><span class="p">,</span> <span class="n">ID_PROJ_BUILD</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">actns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">ID_FILE_PROJ</span><span class="p">,</span> <span class="s1">&#39;&amp;Project&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mProj</span><span class="p">)</span>
        
        <span class="c1"># Create file toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span> <span class="o">=</span> <span class="n">CustomAuiToolBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">SetToolBitmapSize</span><span class="p">(</span><span class="n">TBAR_ICON_SIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">commonActns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildEditActions">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildEditActions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildEditActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tools, set long help strings and bind toolbar events.&quot;&quot;&quot;</span>

        <span class="n">common_actns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span>
                <span class="s1">&#39;Undo&#39;</span><span class="p">,</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;arrow-curve-flip.png&#39;</span><span class="p">),</span>
                <span class="k">lambda</span> <span class="n">evt</span><span class="p">:</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">action_manager</span><span class="o">.</span><span class="n">undo</span><span class="p">(),</span>
                <span class="n">ID_EDIT_UNDO</span>
            <span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span>
                <span class="s1">&#39;Redo&#39;</span><span class="p">,</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;arrow-curve.png&#39;</span><span class="p">),</span>
                <span class="k">lambda</span> <span class="n">evt</span><span class="p">:</span> <span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">action_manager</span><span class="o">.</span><span class="n">redo</span><span class="p">(),</span>
                <span class="n">ID_EDIT_REDO</span>
            <span class="p">)</span>
        <span class="p">]</span>
        
        <span class="c1"># Create edit menu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">common_actns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="n">duplicate</span> <span class="o">=</span> <span class="n">ActionItem</span><span class="p">(</span>
            <span class="s1">&#39;Duplicate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="k">lambda</span> <span class="n">evt</span><span class="p">:</span> <span class="n">cmds</span><span class="o">.</span><span class="n">duplicate</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span>
            <span class="n">ID_EDIT_DUPLICATE</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">duplicate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">([</span>
            <span class="n">ActionItem</span><span class="p">(</span>
                <span class="s1">&#39;Group&#39;</span><span class="p">,</span>
                <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">evt</span><span class="p">:</span> <span class="n">cmds</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">comps</span><span class="p">),</span>
                <span class="n">ID_EDIT_GROUP</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span>
                <span class="s1">&#39;Ungroup&#39;</span><span class="p">,</span>
                <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="k">lambda</span> <span class="n">evt</span><span class="p">:</span> <span class="n">cmds</span><span class="o">.</span><span class="n">ungroup</span><span class="p">(</span><span class="n">get_base</span><span class="p">()</span><span class="o">.</span><span class="n">selection</span><span class="o">.</span><span class="n">comps</span><span class="p">),</span>
                <span class="n">ID_EDIT_UNGROUP</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">],</span> <span class="bp">self</span><span class="p">)</span>

        <span class="n">write_bam</span> <span class="o">=</span> <span class="n">ActionItem</span><span class="p">(</span>
            <span class="s1">&#39;Write Bam File&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">write_bam_file</span><span class="p">,</span>
            <span class="n">ID_EDIT_WRITE_BAM_FILE</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">write_bam</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">export_obj</span> <span class="o">=</span> <span class="n">ActionItem</span><span class="p">(</span>
            <span class="s1">&#39;Export Obj File&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">export_obj</span><span class="p">,</span>
            <span class="n">ID_EDIT_EXPORT_OBJ</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">export_obj</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="c1"># Create edit toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span> <span class="o">=</span> <span class="n">CustomAuiToolBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">SetToolBitmapSize</span><span class="p">(</span><span class="n">TBAR_ICON_SIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">common_actns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildModifyActions">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildModifyActions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildModifyActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tools, set long help strings and bind toolbar events.&quot;&quot;&quot;</span>
        <span class="n">actns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Engage Physics&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;point.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnEngagePhysics</span><span class="p">,</span> <span class="n">ID_MODIFY_PHYSICS</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_CHECK</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="c1"># Create edit menu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mModify</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mModify</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">actns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="c1"># Create edit toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span> <span class="o">=</span> <span class="n">CustomAuiToolBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">SetToolBitmapSize</span><span class="p">(</span><span class="n">TBAR_ICON_SIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">actns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildXformActions">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildXformActions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildXformActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tools, set long help strings and bind toolbar events.&quot;&quot;&quot;</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnXformSetActiveGizmo</span>
        <span class="n">actns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Select&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;select.png&#39;</span><span class="p">),</span> <span class="n">fn</span><span class="p">,</span> <span class="n">ID_XFORM_SEL</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Move&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;move.png&#39;</span><span class="p">),</span> <span class="n">fn</span><span class="p">,</span> <span class="n">ID_XFORM_POS</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Rotate&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;rotate.png&#39;</span><span class="p">),</span> <span class="n">fn</span><span class="p">,</span> <span class="n">ID_XFORM_ROT</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Scale&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;scale.png&#39;</span><span class="p">),</span> <span class="n">fn</span><span class="p">,</span> <span class="n">ID_XFORM_SCL</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;World Transform&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;globe.png&#39;</span><span class="p">),</span> <span class="n">fn</span><span class="p">,</span> <span class="n">ID_XFORM_WORLD</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_CHECK</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="c1"># Create xform toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span> <span class="o">=</span> <span class="n">CustomAuiToolBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">SetToolBitmapSize</span><span class="p">(</span><span class="n">TBAR_ICON_SIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># Need to insert a null object here or the radio buttons don&#39;t seem to work (win7 at least).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">actns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildLayoutActions">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildLayoutActions">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildLayoutActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add tools, set long help strings and bind toolbar events.&quot;&quot;&quot;</span>
        <span class="n">actns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Editor&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;application-sidebar-list.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnLayout</span><span class="p">,</span> <span class="n">ID_LAYOUT_EDITOR</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Game&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;layout-game.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnLayout</span><span class="p">,</span> <span class="n">ID_LAYOUT_GAME</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Both&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;layout-both.png&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnLayout</span><span class="p">,</span> <span class="n">ID_LAYOUT_BOTH</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_RADIO</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="c1"># Create layout toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span> <span class="o">=</span> <span class="n">CustomAuiToolBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="o">.</span><span class="n">SetToolBitmapSize</span><span class="p">(</span><span class="n">TBAR_ICON_SIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># Need to insert a null object here or the radio buttons don&#39;t seem to work (win7 at least).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">actns</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="o">.</span><span class="n">ToggleTool</span><span class="p">(</span><span class="n">ID_LAYOUT_EDITOR</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span></div>

                
<div class="viewcode-block" id="MainFrame.BuildViewMenu">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildViewMenu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildViewMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build the view menu.&quot;&quot;&quot;</span>
        <span class="n">viewActns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Grid&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewGrid</span><span class="p">,</span> <span class="n">ID_VIEW_GRID</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ITEM_CHECK</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="n">camActns</span> <span class="o">=</span> <span class="p">[</span> 
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Top&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_TOP</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">)),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_BOTTOM</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">)),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Left&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_LEFT</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Right&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_RIGHT</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Front&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_FRONT</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Back&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnViewCamera</span><span class="p">,</span> <span class="n">ID_VIEW_BACK</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="p">]</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">mCameras</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">mCameras</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">camActns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Append to view menu </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mView</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">viewActns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="o">.</span><span class="n">AppendSubMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mCameras</span><span class="p">,</span> <span class="s1">&#39;&amp;Camera&#39;</span><span class="p">)</span></div>

                
<div class="viewcode-block" id="MainFrame.BuildCreateMenu">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildCreateMenu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildCreateMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build the create menu.&quot;&quot;&quot;</span>
        <span class="n">lightActns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Ambient&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;AmbientLight&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;PointLight&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Directional&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;DirectionalLight&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Spot&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;Spotlight&#39;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">mLights</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="n">mLights</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">lightActns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="n">collActns</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Node&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionNode&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Sphere&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionSphere&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Inverse Sphere&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionInvSphere&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Box&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionBox&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Capsule&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionCapsule&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Ray&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;CollisionRay&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">mColl</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="n">mColl</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">collActns</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="n">bltActions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;World&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletWorld&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Debug Node&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletDebugNode&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Rigid Body Node&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletRigidBodyNode&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Plane Shape&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletPlaneShape&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Sphere Shape&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletSphereShape&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Box Shape&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletBoxShape&#39;</span><span class="p">),</span>
            <span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Capsule Shape&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;BulletCapsuleShape&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">mBlt</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="n">mBlt</span><span class="o">.</span><span class="n">AppendActionItems</span><span class="p">(</span><span class="n">bltActions</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Panda Node&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;PandaNode&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="c1"># self.mCreate.AppendActionItem(ActionItem(&#39;Actor&#39;, &#39;&#39;, self.OnCreateActor), self)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Fog&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="s1">&#39;Fog&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendSubMenu</span><span class="p">(</span><span class="n">mColl</span><span class="p">,</span> <span class="s1">&#39;&amp;Collision&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendSubMenu</span><span class="p">(</span><span class="n">mLights</span><span class="p">,</span> <span class="s1">&#39;&amp;Lights&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendSubMenu</span><span class="p">(</span><span class="n">mBlt</span><span class="p">,</span> <span class="s1">&#39;&amp;Bullet&#39;</span><span class="p">)</span>
        <span class="c1"># self.mCreate.AppendSeparator()</span>
        <span class="c1"># self.mCreate.AppendActionItem(ActionItem(&#39;Texture&#39;, &#39;&#39;, self.on_create, args=&#39;Texture&#39;), self)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Prefab&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_create_prefab</span><span class="p">,</span> <span class="n">ID_CREATE_PREFAB</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildWindowMenu">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildWindowMenu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildWindowMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build show / hide controls for panes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">mWind</span> <span class="o">=</span> <span class="n">CustomMenu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mWind</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">ID_WIND_PANEL</span><span class="p">,</span> <span class="s1">&#39;&amp;Panel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mWind</span><span class="o">.</span><span class="n">AppendActionItem</span><span class="p">(</span><span class="n">ActionItem</span><span class="p">(</span><span class="s1">&#39;Preferences&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnShowPreferences</span><span class="p">,</span> <span class="n">ID_WIND_PREFERENCES</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span></div>

                
<div class="viewcode-block" id="MainFrame.RebuildPanelMenu">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.RebuildPanelMenu">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">RebuildPanelMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Freeze</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">paneDef</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">paneDef</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mPnl</span><span class="o">.</span><span class="n">AppendCheckItem</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">paneDef</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">caption</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnShowHidePane</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateWindowMenu</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">Thaw</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildMenuBar">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildMenuBar">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildMenuBar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build the menu bar and attach all menus to it.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mFile</span><span class="p">,</span> <span class="s1">&#39;&amp;File&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mEdit</span><span class="p">,</span> <span class="s1">&#39;&amp;Edit&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mView</span><span class="p">,</span> <span class="s1">&#39;&amp;View&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mCreate</span><span class="p">,</span> <span class="s1">&#39;&amp;Create&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mWind</span><span class="p">,</span> <span class="s1">&#39;&amp;Window&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">SetMenuBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mb</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="MainFrame.BuildAuiManager">
<a class="viewcode-back" href="../../../pandaEditor.ui.html#pandaEditor.ui.mainFrame.MainFrame.BuildAuiManager">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">BuildAuiManager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the behaviour for each aui manager panel, then add them to the</span>
<span class="sd">        manager.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define aui manager panes</span>
        <span class="c1"># Each tuple is defined as: widget, show in window menu, aui panel </span>
        <span class="c1"># info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">ID_WIND_FILE_TOOLBAR</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">tbFile</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;tbFile&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;File Toolbar&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">ToolbarPane</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Top</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_EDIT_TOOLBAR</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">tbEdit</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;tbEdit&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Edit Toolbar&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">ToolbarPane</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Top</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_MODIFY_TOOLBAR</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">tbModify</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;tbModify&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Modify Toolbar&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">ToolbarPane</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Top</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_XFORM_TOOLBAR</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">tbXform</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;tbXform&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Transform Toolbar&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">ToolbarPane</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Top</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_LAYOUT_TOOLBAR</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">tbLayout</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;tbLayout&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Layout Toolbar&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">ToolbarPane</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Top</span><span class="p">()),</span>

            <span class="n">ID_WIND_VIEWPORT</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">pnlViewport</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;pnlViewport&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Viewport&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">CloseButton</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MaximizeButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Center</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_SCENE_GRAPH</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">pnlSceneGraph</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;pnlSceneGraph&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Scene Graph&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">CloseButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MaximizeButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MinSize</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
                <span class="o">.</span><span class="n">Left</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
                
            <span class="c1"># ID_WIND_LIGHT_LINKER:(self.pnlLightLinker, True,</span>
            <span class="c1">#     wx.aui.AuiPaneInfo()</span>
            <span class="c1">#     .Name(&#39;pnlLightLinker&#39;)</span>
            <span class="c1">#     .Caption(&#39;Light Linker&#39;)</span>
            <span class="c1">#     .CloseButton(True)</span>
            <span class="c1">#     .MaximizeButton(True)</span>
            <span class="c1">#     .MinSize((100, 100))</span>
            <span class="c1">#     .Right()</span>
            <span class="c1">#     .Position(2)),</span>
                
            <span class="n">ID_WIND_RESOURCES</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">pnlRsrcs</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;pnlRsrcs&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Resources&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">CloseButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MaximizeButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MinSize</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
                <span class="o">.</span><span class="n">Right</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
                
            <span class="n">ID_WIND_PROPERTIES</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">pnlProps</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;pnlProps&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Properties&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">CloseButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MaximizeButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MinSize</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
                <span class="o">.</span><span class="n">Right</span><span class="p">()),</span>
                
            <span class="n">ID_WIND_LOG</span><span class="p">:(</span><span class="bp">self</span><span class="o">.</span><span class="n">pnlLog</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;pnlLog&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="s1">&#39;Log&#39;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">CloseButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MaximizeButton</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">.</span><span class="n">MinSize</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
                <span class="o">.</span><span class="n">Bottom</span><span class="p">()</span>
                <span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="p">}</span>
                        
        <span class="c1"># Build aui manager and add each pane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">AuiManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">paneDef</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paneDefs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">paneDef</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">paneDef</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        
        <span class="c1"># Bind aui manager events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">aui</span><span class="o">.</span><span class="n">EVT_AUI_PANE_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnUpdateWindowMenu</span><span class="p">)</span>
        
        <span class="c1"># Create config and load preferences for all panels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auiCfg</span> <span class="o">=</span> <span class="n">AuiManagerConfig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="p">,</span> <span class="s1">&#39;pandaEditorWindow&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auiCfg</span><span class="o">.</span><span class="n">Load</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span></div>
</div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Pand3D Editor Modern</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">pandaEditor</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Shivam Kumar.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>